<Page x:Class="BiometricEnrollmentApp.AttendancePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Attendance">

    <Grid Margin="12" x:Name="RootGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8" HorizontalAlignment="Left">
            <Button x:Name="GoEnrollBtn" Content="Go to Enrollment" Click="GoEnrollBtn_Click" Width="140" Margin="0,0,8,0"/>
            <Button x:Name="ScanFingerBtn" Content="Scan Finger" Click="ScanFingerBtn_Click" Width="140" Margin="0,0,8,0"/>
            <Button x:Name="RefreshBtn" Content="Refresh List" Click="RefreshBtn_Click" Width="100"/>
        </StackPanel>

        <TextBlock x:Name="StatusTextBlock" Grid.Row="1" Text="Ready" Margin="0,0,0,8" />

        <Separator Grid.Row="2" Margin="0,6"/>

        <!-- Data grid which will show either sessions or legacy attendances -->
        <DataGrid x:Name="SessionsGrid" Grid.Row="3" AutoGenerateColumns="False" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="Employee ID" Binding="{Binding EmployeeId}" Width="120"/>
                <DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="100"/>
                <DataGridTextColumn Header="Clock In" Binding="{Binding ClockIn}" Width="160"/>
                <DataGridTextColumn Header="Clock Out" Binding="{Binding ClockOut}" Width="160"/>
                <DataGridTextColumn Header="Hours" Binding="{Binding TotalHours}" Width="80"/>
                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Overlay for scanning (initially hidden) -->
        <Grid x:Name="OverlayGrid"
              Visibility="Collapsed"
              Background="#88000000"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">
            <Border Width="520" Height="320" Background="White" CornerRadius="8"
                    VerticalAlignment="Center" HorizontalAlignment="Center" Padding="16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock x:Name="OverlayTitle" Text="Place finger on scanner" FontWeight="Bold" FontSize="16" Grid.Row="0" HorizontalAlignment="Center" />

                    <Grid Grid.Row="1" Margin="0,12,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="12"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Photo placeholder -->
                        <Border Grid.Column="0" Width="160" Height="160" Background="#FFF0F0F0" CornerRadius="6" BorderBrush="#FFCCCCCC" BorderThickness="1" HorizontalAlignment="Left" VerticalAlignment="Top">
                            <Grid>
                                <!-- You can replace this TextBlock with an Image control and set Source to an actual image if available -->
                                <TextBlock x:Name="PhotoPlaceholderText" Text="PHOTO" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" Foreground="#FF888888"/>
                            </Grid>
                        </Border>

                        <!-- Details -->
                        <StackPanel Grid.Column="2" VerticalAlignment="Top">
                            <TextBlock Text="Employee" FontWeight="Bold" Foreground="#666"/>
                            <TextBlock x:Name="OverlayNameText" Text="Name Placeholder" FontSize="14" Margin="0,6,0,10"/>
                            <TextBlock Text="Employee ID" FontWeight="Bold" Foreground="#666"/>
                            <TextBlock x:Name="OverlayIdText" Text="ID Placeholder" FontSize="14" Margin="0,6,0,10"/>
                            <TextBlock Text="Status" FontWeight="Bold" Foreground="#666"/>
                            <TextBlock x:Name="OverlayStatusText" Text="Waiting for scan..." FontSize="13" Margin="0,6,0,0"/>
                        </StackPanel>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Grid.Row="2" HorizontalAlignment="Right">
                        <Button x:Name="CancelOverlayBtn" Content="Cancel" Click="CancelOverlayBtn_Click" Width="90" Margin="0,0,8,0"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Page>
