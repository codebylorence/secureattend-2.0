<Page x:Class="BiometricEnrollmentApp.AttendancePage" 
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Attendance"
      Background="#F6F7F9">

    <Page.Resources>
        <!-- Palette -->
        <Color x:Key="PrimaryColor">#1E3A8A</Color>
        <Color x:Key="AccentColor">#2563EB</Color>
        <Color x:Key="MutedText">#6B7280</Color>
        <Color x:Key="CardBg">#FFFFFF</Color>
        <Color x:Key="Surface">#F8FAFC</Color>
        <Color x:Key="GridHeaderBg">#EEF2FF</Color>
        <Color x:Key="RowAltBg">#FBFDFF</Color>
        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="MutedBrush" Color="{StaticResource MutedText}"/>
        <SolidColorBrush x:Key="CardBgBrush" Color="{StaticResource CardBg}"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource Surface}"/>
        <SolidColorBrush x:Key="GridHeaderBrush" Color="{StaticResource GridHeaderBg}"/>
        <SolidColorBrush x:Key="RowAltBrush" Color="{StaticResource RowAltBg}"/>

        <!-- Global text styles -->
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Foreground" Value="{StaticResource MutedBrush}"/>
        </Style>

        <Style x:Key="TitleText" TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
        </Style>

        <Style x:Key="StatusTextStyle" TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource MutedBrush}"/>
        </Style>

        <!-- Button base: rounded, padding, hover -->
        <Style TargetType="Button">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="MinWidth" Value="90"/>
            <Setter Property="MinHeight" Value="34"/>
            <Setter Property="Background" Value="#E5E7EB"/>
            <Setter Property="Foreground" Value="#111827"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                SnapsToDevicePixels="True"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#D1D5DB"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Bd" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.99" ScaleY="0.99"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Bd" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Accent primary button -->
        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>

        <!-- Small neutral button -->
        <Style x:Key="NeutralButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="Foreground" Value="#111827"/>
        </Style>

        <!-- Separator style -->
        <Style TargetType="Separator">
            <Setter Property="Height" Value="1"/>
            <Setter Property="Margin" Value="0,8"/>
            <Setter Property="Background" Value="#E6E9EE"/>
        </Style>

        <!-- DataGrid styles -->
        <Style TargetType="DataGrid">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="RowHeight" Value="36"/>
            <Setter Property="ColumnHeaderHeight" Value="40"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="Background" Value="{StaticResource CardBgBrush}"/>
            <Setter Property="BorderBrush" Value="#E6E9EE"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#F1F5F9"/>
            <Setter Property="VerticalGridLinesBrush" Value="#F1F5F9"/>
            <Setter Property="AlternatingRowBackground" Value="{StaticResource RowAltBrush}"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="Margin" Value="0,6,0,0"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{StaticResource GridHeaderBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="10,4"/>
            <Setter Property="Foreground" Value="#111827"/>
        </Style>

        <Style TargetType="DataGridRow">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

    </Page.Resources>

    <Grid Margin="12" x:Name="RootGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8" HorizontalAlignment="Left" VerticalAlignment="Center">
            <!-- apply style keys where we want primary (accent) buttons: -->
            <Button x:Name="GoEnrollBtn" Content="Go to Enrollment" Click="GoEnrollBtn_Click" Width="140" Style="{StaticResource PrimaryButton}" Margin="0,0,8,0"/>
            <Button x:Name="ScanFingerBtn" Content="Scan Finger" Click="ScanFingerBtn_Click" Width="140" Style="{StaticResource NeutralButton}" Margin="0,0,8,0"/>
            <Button x:Name="RefreshBtn" Content="Refresh List" Click="RefreshBtn_Click" Width="100" Style="{StaticResource NeutralButton}"/>
        </StackPanel>

        <TextBlock x:Name="StatusTextBlock" Grid.Row="1" Text="Ready" Margin="0,0,0,8" Style="{StaticResource StatusTextStyle}" />

        <Separator Grid.Row="2" Margin="0,6"/>

        <!-- Data grid which will show either sessions or legacy attendances -->
        <DataGrid x:Name="SessionsGrid" Grid.Row="3" AutoGenerateColumns="False" IsReadOnly="True" CanUserResizeRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="Employee ID" Binding="{Binding EmployeeId}" Width="120"/>
                <DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="100"/>
                <DataGridTextColumn Header="Clock In" Binding="{Binding ClockIn}" Width="160"/>
                <DataGridTextColumn Header="Clock Out" Binding="{Binding ClockOut}" Width="160"/>
                <DataGridTextColumn Header="Hours" Binding="{Binding TotalHours}" Width="80"/>
                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

    </Grid>
</Page>
